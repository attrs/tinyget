/*! tinyget v0.0.1 attrs */!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Tinyget",[],t):"object"==typeof exports?exports.Tinyget=t():e.Tinyget=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),r=0,o=n.length;o>r;r++){var i=n[r],s=i.indexOf(": ");if(s>0){var u=i.substring(0,s),f=i.substring(s+2);t[u]=f}}return t}function o(e){return{status:e.status,headers:r(e.getAllResponseHeaders()),text:e.responseText,data:e.response||e.responseXML}}var i=n(1);i.connector=function(e,t){var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open(e.method,e.url,!e.sync),n.onload=function(){t(null,o(n))},n.onerror=function(){t(new Error("error("+n.status+"): "+e.url),o(n))},n.onabort=function(){t(new Error("aborted: "+e.url),o(n))},n.ontimeout=function(){t(new Error("timeout: "+e.url),o(n))};for(var r in e.headers)n.setRequestHeader(r,e.headers[r]);e.responseType&&(n.responseType=e.responseType),e.payload?n.send(e.payload):n.send()},i.toXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")},i.toDocument=function(e){return(new DOMParser).parseFromString(e,"text/html")},e.exports=i},function(e,t,n){function r(e,t){e=e||{},"string"==typeof e&&(e={url:e});var n=function(){function e(e,t){(o[e]||[]).forEach(function(n){n({type:e,detail:t})})}function t(e,t){o[e]=o[e]||[],o[e].push(t)}function n(e,n){var o=function(t){return r(e,o),n(t)};t(e,o)}function r(e,t){var n=o[e];if(n)for(var r;~(r=n.indexOf(t));)n.splice(r,1)}var o={};return{fire:e,on:t,once:n,off:r}}(),i={url:function(t){return arguments.length?(e.url=t,this):e.url},payload:function(t){return arguments.length?(e.payload=t,this):e.payload||e.body},qry:function(t){return arguments.length?(e.qry=t,this):e.qry},sync:function(t){return arguments.length?(e.sync=t,this):e.sync},contentType:function(t){return arguments.length?(e.contentType=t,this):e.contentType},responseType:function(t){return arguments.length?(e.responseType=t,this):e.responseType},type:function(t){return arguments.length?(e.type=t,this):e.type},headers:function(t){return arguments.length?~["object","function"].indexOf(typeof t)?(e.headers=t||{},this):console.error("headers must be an object or function")||this:e.headers},header:function(t,n){if(!t)return console.error("missing header name")||this;if("string"!=typeof t)return console.error("header name must be a string")||this;if(1===arguments.length)return e.headers[t];if(e.headers){if("function"==typeof e.headers)return console.error("options.headers is function")||this}else e.headers={};return null==n?delete e.headers[t]:e.headers[t]=n,this},on:function(e,t){return n.on(e,t),this},once:function(e,t){return n.once(e,t),this},off:function(e,t){return n.off(e,t),this},exec:function(t){if("function"!=typeof t&&(t=function(){}),!e)return t(new Error("missing options"));if(!r.connector)return t(new Error("connector not found"));var i=e.url,s=e.method||"get",u=e.qry,f=e.payload||e.body,c=e.headers||{},p=e.contentType,a=e.responseType,d=e.type,y=e.sync===!0;return"function"==typeof i&&(i=i()),"function"==typeof s&&(s=s()),"function"==typeof u&&(u=u()),"function"==typeof f&&(f=f()),"function"==typeof c&&(c=c()),"function"==typeof p&&(p=p()),"function"==typeof a&&(a=a()),"function"==typeof d&&(d=d()),"function"==typeof y&&(y=y()),i?"string"!=typeof i?fn(new Error("url must be a string: "+typeof i)):(u&&("object"==typeof u&&(u=o.encode(u)),"string"==typeof u&&(i=~i.indexOf("?")?i+"&"+u:i+"?"+u)),f&&(p&&~p.indexOf("json")?f="object"==typeof f?JSON.stringify(f):f.toString():p||"application/x-www-form-urlencoded"!==p?p||"object"!=typeof f?p||"string"!=typeof f||(p="application/x-www-form-urlencoded"):(p="application/json",f=JSON.stringify(f)):f="object"==typeof f?o.encode(f):f.toString()),p&&(c["Content-Type"]=p),r.connector({url:i,method:s,payload:f,headers:c,responseType:a,sync:y},function(e,o){e&&(n.fire("error",{response:o,error:e}),t(e));try{var i,s=o.text,u=o.data,f=o.headers||{};for(var c in f)f[c.toLowerCase()]=f[c];o.headers=f;var p=f["content-type"];i=a?u:"document"===d?u&&"string"!=typeof u?u:r.toDocument(u||s):"xml"===d?u&&"string"!=typeof u?u:r.toXml(u||s):"json"===d?JSON.parse(s):"text"===d?s:p&&~p.indexOf("/xml")?u&&"string"!=typeof u?u:r.toXml(u||s):p&&~p.indexOf("/html")?u&&"string"!=typeof u?u:r.toDocument(u||s):p&&~p.indexOf("/json")?JSON.parse(s):s,n.fire("load",{response:o,data:i}),t(null,i,o)}catch(e){n.fire("error",{response:o,error:e}),t(e,null,o)}}),this):t(new Error("missing url"))}};return"function"==typeof t?i.exec(t):i}var o=n(2);r.get=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="get",r(e).payload(t)},r.options=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="options",r(e).payload(t)},r.post=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="post",r(e).payload(t)},r.put=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="put",r(e).payload(t)},r["delete"]=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="delete",r(e).payload(t)},e.exports=r},function(e,t,n){"use strict";t.decode=t.parse=n(3),t.encode=t.stringify=n(4)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var f=e.length;u>0&&f>u&&(f=u);for(var c=0;f>c;++c){var p,a,d,y,l=e[c].replace(s,"%20"),h=l.indexOf(r);h>=0?(p=l.substr(0,h),a=l.substr(h+1)):(p=l,a=""),d=decodeURIComponent(p),y=decodeURIComponent(a),n(i,d)?Array.isArray(i[d])?i[d].push(y):i[d]=[i[d],y]:i[d]=y}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}}])});