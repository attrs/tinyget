/*! tinyget v0.0.3 attrs */!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("Tinyget",[],n):"object"==typeof exports?exports.Tinyget=n():e.Tinyget=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function r(e){var n={};if(!e)return n;for(var t=e.split("\r\n"),r=0,o=t.length;o>r;r++){var i=t[r],s=i.indexOf(": ");if(s>0){var u=i.substring(0,s),f=i.substring(s+2);n[u]=f}}return n}function o(e){return{status:e.status,headers:r(e.getAllResponseHeaders()),text:e.responseText,data:e.response||e.responseXML}}var i=t(1);i.impl.connector=function(e,n){var t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");t.open(e.method,e.url,!e.sync),t.onload=function(){n(null,o(t))},t.onerror=function(){n(new Error("error("+t.status+"): "+e.url),o(t))},t.onabort=function(){n(new Error("aborted: "+e.url),o(t))},t.ontimeout=function(){n(new Error("timeout: "+e.url),o(t))};for(var r in e.headers)t.setRequestHeader(r,e.headers[r]);e.responseType&&(t.responseType=e.responseType),e.payload?t.send(e.payload):t.send()},i.impl.toXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")},i.impl.toDocument=function(e){return(new DOMParser).parseFromString(e,"text/html")},e.exports=i},function(e,n,t){function r(e){function n(t,r){t=t||{},"string"==typeof t&&(t={url:t});var u=function(){function e(e,n){(o[e]||[]).forEach(function(t){t({type:e,detail:n})})}function n(e,n){o[e]=o[e]||[],o[e].push(n)}function t(e,t){var o=function(n){return r(e,o),t(n)};n(e,o)}function r(e,n){var t=o[e];if(t)for(var r;~(r=t.indexOf(n));)t.splice(r,1)}var o={};return{fire:e,on:n,once:t,off:r}}(),f={url:function(e){return arguments.length?(t.url=e,this):t.url},payload:function(e){return arguments.length?(t.payload=e,this):t.payload||t.body},qry:function(e){return arguments.length?(t.qry=e,this):t.qry},sync:function(e){return arguments.length?(t.sync=e,this):t.sync},contentType:function(e){return arguments.length?(t.contentType=e,this):t.contentType},responseType:function(e){return arguments.length?(t.responseType=e,this):t.responseType},type:function(e){return arguments.length?(t.type=e,this):t.type},headers:function(e){return arguments.length?~["object","function"].indexOf(typeof e)?(t.headers=e||{},this):console.error("headers must be an object or function")||this:t.headers},header:function(e,n){if(!e)return console.error("missing header name")||this;if("string"!=typeof e)return console.error("header name must be a string")||this;if(1===arguments.length)return t.headers[e];if(t.headers){if("function"==typeof t.headers)return console.error("options.headers is function")||this}else t.headers={};return null==n?delete t.headers[e]:t.headers[e]=n,this},on:function(e,n){return u.on(e,n),this},once:function(e,n){return u.once(e,n),this},off:function(e,n){return u.off(e,n),this},get:n.get,post:n.post,put:n.put,options:n.options,"delete":n["delete"],exec:function(n){if("function"!=typeof n&&(n=function(){}),!t)return n(new Error("missing options"));if(!s.connector)return n(new Error("connector not found"));var r=t.url,f=t.method||"get",c=t.qry,p=t.payload||t.body,a=t.headers||{},l=t.contentType,d=t.responseType,y=t.type,h=t.sync===!0;if("function"==typeof r&&(r=r()),"function"==typeof f&&(f=f()),"function"==typeof c&&(c=c()),"function"==typeof p&&(p=p()),"function"==typeof a&&(a=a()),"function"==typeof l&&(l=l()),"function"==typeof d&&(d=d()),"function"==typeof y&&(y=y()),"function"==typeof h&&(h=h()),!r)return n(new Error("missing url"));if("string"!=typeof r)return fn(new Error("url must be a string: "+typeof r));c&&("object"==typeof c&&(c=o.encode(c)),"string"==typeof c&&(r=~r.indexOf("?")?r+"&"+c:r+"?"+c)),p&&(l&&~l.indexOf("json")?p="object"==typeof p?JSON.stringify(p):p.toString():l||"application/x-www-form-urlencoded"!==l?l||"object"!=typeof p?l||"string"!=typeof p||(l="application/x-www-form-urlencoded"):(l="application/json",p=JSON.stringify(p)):p="object"==typeof p?o.encode(p):p.toString()),l&&(a["Content-Type"]=l);var g=e&&e.trim();return!g||~r.indexOf("://")&&r.indexOf("/")>r.indexOf(":")||(~g.indexOf("://")&&g.indexOf("/")>g.indexOf(":")?("/"!==g[g.length-1]&&(g+="/"),"/"===r[0]&&(r=r.substring(1)),r=g+i.normalize(r)):r=i.resolve(g,r)),s.connector({url:r,method:f,payload:p,headers:a,responseType:d,sync:h},function(e,t){if(t)try{var r,o=t.text,i=t.data,f=t.headers||{};for(var c in f)f[c.toLowerCase()]=f[c];t.headers=f;var p=f["content-type"];r=d?i:"document"===y?i&&"string"!=typeof i?i:s.toDocument(i||o):"xml"===y?i&&"string"!=typeof i?i:s.toXml(i||o):"json"===y?JSON.parse(o):"text"===y?o:p&&~p.indexOf("/xml")?i&&"string"!=typeof i?i:s.toXml(i||o):p&&~p.indexOf("/html")?i&&"string"!=typeof i?i:s.toDocument(i||o):p&&~p.indexOf("/json")?JSON.parse(o):o,u.fire("load",{response:t,data:r}),(t.status<200||t.status>=300)&&(e=new Error("error "+t.status))}catch(a){e=a}e&&u.fire("error",{response:t,error:e}),n(e||null,r||null,t||null)}),this}};return"function"==typeof r?f.exec(r):f}if(e=e||"","string"!=typeof e)throw new TypeError("illegal type of endpoint url:"+e);return n.endpoint=function(n){if(!arguments.length)return e;if(n===!1&&(n=""),"string"!=typeof n)throw new TypeError("illegal type of endpoint url:"+n);return e=n,this},n.get=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="get",n(e).qry(t)},n.options=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="options",n(e).qry(t)},n.post=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="post",n(e).payload(t)},n.put=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="put",n(e).payload(t)},n["delete"]=function(e,t){return"string"==typeof e&&(e={url:e}),e=e||{},e.method="delete",n(e).qry(t)},n}var o=t(2),i=t(5),s={},u=new r;u.Tinyget=r,u.impl=s,u.endpoint=function(e){return new r(e)},e.exports=u},function(e,n,t){"use strict";n.decode=n.parse=t(3),n.encode=n.stringify=t(4)},function(e,n){"use strict";function t(e,n){return Object.prototype.hasOwnProperty.call(e,n)}e.exports=function(e,n,r,o){n=n||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(n);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var f=e.length;u>0&&f>u&&(f=u);for(var c=0;f>c;++c){var p,a,l,d,y=e[c].replace(s,"%20"),h=y.indexOf(r);h>=0?(p=y.substr(0,h),a=y.substr(h+1)):(p=y,a=""),l=decodeURIComponent(p),d=decodeURIComponent(a),t(i,l)?Array.isArray(i[l])?i[l].push(d):i[l]=[i[l],d]:i[l]=d}return i}},function(e,n){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,o){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(t(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(t(e))}).join(n):i+encodeURIComponent(t(e[o]))}).join(n):o?encodeURIComponent(t(o))+r+encodeURIComponent(t(e)):""}},function(e,n,t){(function(e){function t(e,n){for(var t=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),t++):t&&(e.splice(r,1),t--)}if(n)for(;t--;t)e.unshift("..");return e}function r(e,n){if(e.filter)return e.filter(n);for(var t=[],r=0;r<e.length;r++)n(e[r],r,e)&&t.push(e[r]);return t}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,o="/"===s.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var o=n.isAbsolute(e),i="/"===s(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,n){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var n=0;n<e.length&&""===e[n];n++);for(var t=e.length-1;t>=0&&""===e[t];t--);return n>t?[]:e.slice(n,t-n+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),s=Math.min(o.length,i.length),u=s,f=0;s>f;f++)if(o[f]!==i[f]){u=f;break}for(var c=[],f=u;f<o.length;f++)c.push("..");return c=c.concat(i.slice(u)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var n=i(e),t=n[0],r=n[1];return t||r?(r&&(r=r.substr(0,r.length-1)),t+r):"."},n.basename=function(e,n){var t=i(e)[2];return n&&t.substr(-1*n.length)===n&&(t=t.substr(0,t.length-n.length)),t},n.extname=function(e){return i(e)[3]};var s="b"==="ab".substr(-1)?function(e,n,t){return e.substr(n,t)}:function(e,n,t){return 0>n&&(n=e.length+n),e.substr(n,t)}}).call(n,t(6))},function(e,n){function t(){a&&c&&(a=!1,c.length?p=c.concat(p):l=-1,p.length&&r())}function r(){if(!a){var e=s(t);a=!0;for(var n=p.length;n;){for(c=p,p=[];++l<n;)c&&c[l].run();l=-1,n=p.length}c=null,a=!1,u(e)}}function o(e,n){this.fun=e,this.array=n}function i(){}var s,u,f=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(e){u=function(){throw new Error("clearTimeout is not defined")}}}();var c,p=[],a=!1,l=-1;f.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];p.push(new o(e,n)),1!==p.length||a||s(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=i,f.addListener=i,f.once=i,f.off=i,f.removeListener=i,f.removeAllListeners=i,f.emit=i,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}}])});